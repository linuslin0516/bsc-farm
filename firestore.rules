rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // User data
    match /users/{oderId} {
      allow read, write: if true;
    }

    // Legacy players collection
    match /players/{oderId} {
      allow read, write: if true;
    }

    // Daily tasks
    match /dailyTasks/{oderId} {
      allow read, write: if true;
    }

    // Achievements
    match /achievements/{oderId} {
      allow read, write: if true;
    }

    // Player stats (leaderboard)
    match /playerStats/{oderId} {
      allow read, write: if true;
    }

    // Leaderboard cache
    match /leaderboardCache/{document} {
      allow read, write: if true;
    }

    // Friends
    match /friends/{oderId} {
      allow read, write: if true;
    }

    // Steal records
    match /steal_records/{document} {
      allow read, write: if true;
    }

    // Market data
    match /market/{document} {
      allow read, write: if true;
    }

    // Exchange rates
    match /exchange/{document} {
      allow read: if true;
      allow write: if false;
    }

    // User exchange data
    match /user_exchange/{userId} {
      allow read, write: if true;
    }

    // Airdrop history (admin)
    match /airdropHistory/{document} {
      allow read, write: if true;
    }

    // Withdrawal requests
    match /withdrawal_requests/{requestId} {
      allow read: if true;
      allow create: if true;
      allow update: if false;
    }

    // Exchange transactions
    match /exchange_transactions/{txId} {
      allow read: if true;
      allow create: if true;
      allow update: if false;
    }
  }
}
